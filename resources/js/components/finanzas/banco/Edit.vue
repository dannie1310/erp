<template>
    <span>
        <nav>
            <div class="col-md-12" v-if="banco">
                <div class="form-group">
                    <label><b>Banco:</b></label>
                    {{ banco.razon_social }}
                </div>
            </div>
            <nav>
                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                    <a aria-controls="nav-home" aria-selected="true" class="nav-item nav-link active" data-toggle="tab" href="#nav-home"
                       id="nav-home-tab" role="tab">Identificaci√≥n</a>
                    <a aria-controls="nav-profile" aria-selected="false" class="nav-item nav-link" data-toggle="tab"
                       href="#nav-profile" id="nav-profile-tab" role="tab" v-if="$root.can('consultar_cuenta_corriente')">Cuentas</a>
                    <a aria-controls="nav-contact" aria-selected="false" class="nav-item nav-link" data-toggle="tab" href="#nav-contact"
                       id="nav-contact-tab" role="tab" v-if="$root.can('consultar_sucursal_banco')">Sucursales</a>
                </div>
            </nav>

            <div class="tab-content" id="nav-tabContent">
                <div aria-labelledby="nav-home-tab" class="tab-pane fade show active" id="nav-home" role="tabpanel">
                    <edit-banco v-bind:id="id"></edit-banco>
                </div>
                <div aria-labelledby="nav-profile-tab" class="tab-pane fade" id="nav-profile" role="tabpanel"
                         v-if="$root.can('consultar_cuenta_corriente')">
                    <index-cuenta v-bind:id="id"></index-cuenta>
                </div>
                <div aria-labelledby="nav-contact-tab" class="tab-pane fade" id="nav-contact" role="tabpanel" style="display:block;"
                        v-if="$root.can('consultar_sucursal_banco')">
                    <index-sucursal v-bind:id="id"></index-sucursal>
                </div>
            </div>
        </nav>
    </span>
</template>
<script>
    import IndexCuenta from "./cuenta/Index";
    import IndexSucursal from "./sucursal/Index";
    import EditBanco from "./EditBanco";


    export default {
        name: "banco-edit",
        components: {IndexSucursal, IndexCuenta, EditBanco},
        props: ['id'],
        data(){
            return{
                bancos: null,
                cargando: false,
            }
        },
        mounted() {
            this.find()
        },
        methods: {
            find() {
                this.cargando = true;
                this.$store.commit('cadeco/banco/SET_BANCO', null);
                return this.$store.dispatch('cadeco/banco/find', {
                    id: this.id
                }).then(data => {
                    this.$store.commit('cadeco/banco/SET_BANCO', data);
                    $(this.$refs.modal).modal('show')
                })
            }
        },
        computed: {
            banco() {
                return this.$store.getters['cadeco/banco/currentBanco']
            }
        }
    }
</script>

<style scoped>

</style>
